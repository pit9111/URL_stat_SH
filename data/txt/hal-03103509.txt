Algorithmes Ã  base de provenance pour des requÃªtes
enrichies sur les bases de donnÃ©es graphes
Yann Ramusat, Silviu Maniu, Pierre Senellart

To cite this version:

Yann Ramusat, Silviu Maniu, Pierre Senellart. Algorithmes Ã  base de provenance pour des requÃªtes
enrichies sur les bases de donnÃ©es graphes. BDA 2020 - 36Ã¨me ConfÃ©rence sur la Gestion de DonnÃ©es
â€“ Principes, Technologies et Applications, Oct 2020, Paris / Virtuel, France. ï¿¿hal-03103509ï¿¿

HAL Id: hal-03103509

https://inria.hal.science/hal-03103509

Submitted on 8 Jan 2021

HAL is a multi-disciplinary open access
archive for the deposit and dissemination of sci-
entific research documents, whether they are pub-
lished or not. The documents may come from
teaching and research institutions in France or
abroad, or from public or private research centers.

Lâ€™archive ouverte pluridisciplinaire HAL, est
destinÃ©e au dÃ©pÃ´t et Ã  la diffusion de documents
scientifiques de niveau recherche, publiÃ©s ou non,
Ã©manant des Ã©tablissements dâ€™enseignement et de
recherche franÃ§ais ou Ã©trangers, des laboratoires
publics ou privÃ©s.

Algorithmes Ã  base de provenance pour des requÃªtes enrichies
sur les bases de donnÃ©es graphes

Yann Ramusat
DI ENS, ENS, CNRS,
UniversitÃ© PSL & Inria
Paris, France
yann.ramusat@ens.fr

Silviu Maniu
UniversitÃ© Paris-Saclay, LRI, CNRS
& Inria
Paris, France
silviu.maniu@lri.fr

Pierre Senellart
DI ENS, ENS, CNRS,
UniversitÃ© PSL & Inria & IUF
Paris, France
pierre@senellart.com

Les bases de donnÃ©es orientÃ©es graphe [13] font partie de lâ€™Ã©co-
systÃ¨me des SGBD appelÃ©s NoSQL, dans lesquels lâ€™information
nâ€™est pas organisÃ©e en suivant strictement le modÃ¨le relationnel.
La structure des bases de donnÃ©es graphe est bien adaptÃ©e Ã  la re-
prÃ©sentation de certains types de relations dans les donnÃ©es et leur
potentiel pour la distribution les rendent attractives pour des appli-
cations nÃ©cessitant du stockage Ã  grande Ã©chelle et du traitement
de donnÃ©es massivement parallÃ¨le. Des exemples dâ€™applications
naturelles de tels systÃ¨mes de bases de donnÃ©es sont lâ€™analyse des
rÃ©seaux sociaux [5] ou le stockage et lâ€™interrogation du Web sÃ©man-
tique [2].

Les bases de donnÃ©es graphe peuvent Ãªtre interrogÃ©es en utili-
sant plusieurs langages de requÃªtes gÃ©nÃ©raux de navigation, dont
une abstraction est les requÃªtes rÃ©guliÃ¨res de chemin (regular path
queries ou RPQ en anglais) [3] (ou des gÃ©nÃ©ralisations de celles-ci,
comme les C2RPQ), sur les chemins du graphe. RÃ©cemment, en sâ€™ap-
puyant sur les solutions existantes pour lâ€™interrogation des graphes
Ã  propriÃ©tÃ©s â€“ comme le langage Cypher [6] de Neo4j ou PGQL [15]
dâ€™Oracle â€“ une future norme internationale pour lâ€™interrogation de
graphes Ã  propriÃ©tÃ©s, GQL [9], est en cours dâ€™Ã©laboration en tant
que langage de requÃªte Ã  part entiÃ¨re au cÃ´tÃ© de SQL. GQL inclura
notamment un support des RPQ.

En parallÃ¨le de ces dÃ©veloppements rÃ©cents, la notion de pro-
venance dâ€™un rÃ©sultat de requÃªte [14], une notion familiÃ¨re dans
les bases de donnÃ©es relationnelles, a rÃ©cemment Ã©tÃ© adaptÃ©e au
contexte des bases de donnÃ©es graphe [11], en utilisant le cadre
des semi-anneaux de provenance [7]. Dans ce cadre, les arÃªtes dâ€™un
graphe sont annotÃ©es, en plus des propriÃ©tÃ©s usuelles, par des Ã©lÃ©-
ments dâ€™un semi-anneau ; quand une requÃªte est Ã©valuÃ©e, le fait
de traverser les chemins du graphe peut engendrer de nouvelles
annotations qui dÃ©pendent des opÃ©rateurs du semi-anneau, et qui
rÃ©sultent en une valeur du semi-anneau associÃ©e Ã  chaque rÃ©sultat
de la requÃªte, appelÃ©e la provenance du rÃ©sultat. En choisissant dif-
fÃ©rents semi-anneaux, des informations diffÃ©rentes sur le rÃ©sultat de
la requÃªte peuvent Ãªtre calculÃ©es. Par exemple, quand les arÃªtes sont
annotÃ©es avec des Ã©lÃ©ments du semi-anneau tropical (les nombres
rÃ©els positifs ou nuls) exprimant la distance entre les nÅ“uds, la
provenance du rÃ©sultat calcule la plus courte distance des chemins
qui ont produit ce rÃ©sultat ; quand les arÃªtes sont annotÃ©es par des
Ã©lÃ©ments du semi-anneau de comptage (les entiers naturels) inter-
prÃ©tÃ©s comme une multiplicitÃ©, la provenance du rÃ©sultat calcule
le nombre (qui peut Ãªtre infini en cas de cycles) de maniÃ¨re dont
chaque rÃ©sultat peut Ãªtre obtenu. Les propriÃ©tÃ©s sous-jacentes du

Â© 2020, Droits restant aux auteurs. PubliÃ© dans les actes de la confÃ©rence BDA 2020
(27-29 octobre 2020, En ligne, France). Redistribution de cet article autorisÃ©e selon les
termes de la licence Creative Commons CC-by-nc-nd 4.0.

â„ â©½ 4

ğ‘ 

â„ â©½ 2,10

ğ‘¢

ğ‘£

â„ â©½ 2,10, recharge

ğ‘¡

Figure 1: RÃ©seau routier exemple reprÃ©sentÃ© par un graphe
avec des annotations de provenance selon deux dimensions :
la hauteur â„ maximale (un nombre positif) quâ€™un vÃ©hicule
doit avoir pour utiliser le segment de route, et un boolÃ©en in-
diquant la prÃ©sence dâ€™une station de recharge pour vÃ©hicule
Ã©lectrique. Quand une dimension nâ€™est pas mentionnÃ©e, les
annotations sont supposÃ©es Ãªtre, respectivement, â„ â©½ âˆ et
Â¬(recharge).

semi-anneau contrÃ´lent directement la maniÃ¨re dont lâ€™information
sur les arÃªtes du graphe est encodÃ©e et Ã©galement lâ€™efficacitÃ© des
algorithmes de traitement des requÃªtes.

Au-delÃ  de ces exemples simples de semi-anneaux, le cadre de
la provenance par semi-anneau permet aussi de modÃ©liser des pro-
blÃ¨mes complexes, p. ex., oÃ¹ le problÃ¨me dâ€™intÃ©rÃªt peux Ãªtre dÃ©com-
posÃ© en plusieurs sous-problÃ¨mes et oÃ¹ la provenance du rÃ©sultat
ne correspond pas nÃ©cessairement Ã  un chemin particulier dans le
graphe.

Exemple 1. ConsidÃ©rons lâ€™exemple dâ€™un rÃ©seau de transport routier
modÃ©lisÃ© comme un graphe orientÃ© avec des annotations de provenance
sur les arÃªtes. On peut par exemple encoder la prÃ©sence de points
dâ€™intÃ©rÃªts (tels que des stations essence, des restaurants ou des stations
de recharge Ã©lectrique) comme des caractÃ©ristiques boolÃ©ennes des
arÃªtes, et les propriÃ©tÃ©s des routes (p. ex., hauteur ou poids maximal
pour un tunnel ou un pont) comme des caractÃ©ristiques Ã  valeur rÃ©elle.
Nous allons montrer que, en utilisant la provenance par semi-
anneaux, nous pouvons traiter des requÃªtes de graphe qui prennent en
compte une multiplicitÃ© de telles caractÃ©ristiques : une paire de nÅ“uds
est valide pour ces requÃªtes sâ€™il existe au moins un chemin valide pour
chaque restriction entre les deux emplacements. Une application de
cela serait de sâ€™assurer que diffÃ©rentes catÃ©gories de vÃ©hicules (disons,
un camion de grand gabarit et une voiture Ã©lectrique nÃ©cessitant une
recharge sur le chemin) peuvent atteindre une destination commune
Ã  partir de la mÃªme origine.

Une autre sÃ©mantique possible pour la provenance par semi-anneaux
est de vÃ©rifier que tous les chemins entre deux nÅ“uds vÃ©rifient (ou
excluent) certaines propriÃ©tÃ©s (p. ex., absence de pÃ©ages ou prÃ©sence de

BDA, octobre 2020, En ligne, France

Yann Ramusat, Silviu Maniu, and Pierre Senellart

stations essence sur la route) fournissant ainsi Ã  des administrateurs
des informations cruciales sur lâ€™Ã©tat global des itinÃ©raires entre deux
points.

Ceci est illustrÃ© en figure 1, un rÃ©seau routier dans lequel certains
segments de routes ont des restrictions sur la hauteur des vÃ©hicules ;
câ€™est une premiÃ¨re dimension de provenance. La deuxiÃ¨me dimension
indique sâ€™il existe une station de recharge Ã©lectrique sur le segment de
route â€“ dans notre exemple, ce nâ€™est le cas que pour une seule arÃªte.
Dans nos recherches prÃ©liminaires antÃ©rieures [11], nous avons
gÃ©nÃ©ralisÃ© trois algorithmes existants dâ€™une large gamme de la lit-
tÃ©rature en informatique au calcul de la provenance de requÃªtes rÃ©-
guliÃ¨res de chemin, dans le cadre de provenance par semi-anneaux.
Pris ensemble, ces trois gÃ©nÃ©ralisations recouvrent une grande
classe de semi-anneaux utilisÃ©s pour la provenance, chacun condui-
sant Ã  un compromis entre complexitÃ© en temps et gÃ©nÃ©ralitÃ©. Nous
avons Ã©galement conduit des expÃ©riences suggÃ©rant que ces ap-
proches sont complÃ©mentaires et applicables en pratique pour di-
vers types dâ€™indications de provenance, mÃªme sur des rÃ©seaux de
transports relativement grands.

Dans les recherches rÃ©sumÃ©es ici, et dÃ©crites en dÃ©tail en [12],

nous Ã©tendons ce travail en :

â€” Introduisant un nouvel algorithme, MultiDijkstra, pour les
semi-anneaux commutatifs 0-clos (ou absorptifs). Cet algo-
rithme, qui gÃ©nÃ©ralise lâ€™algorithme de Dijkstra et exploite les
propriÃ©tÃ©s des treillis distributifs, comble partiellement un
fossÃ© entre deux classes de semi-anneaux qui Ã©tait non traitÃ©
dans nos recherches antÃ©rieures. Les requÃªtes de lâ€™exemple 1
font partie de cette classe et ont fortement motivÃ© notre intÃ©rÃªt
pour dÃ©velopper de nouveaux algorithmes. Les expÃ©riences
que nous avons conduites dÃ©montrent que notre nouvel algo-
rithme passe Ã  lâ€™Ã©chelle de trÃ¨s grands rÃ©seaux contenant des
dizaines de millions de nÅ“uds, apportant une amÃ©lioration
notable Ã  lâ€™Ã©tat de lâ€™art du calcul de provenance dans les bases
de donnÃ©es graphe.

â€” Ã‰tablissant un rÃ©sumÃ© prÃ©cis, sous la forme dâ€™une taxonomie,
des algorithmes utilisÃ©s dans notre contexte, ainsi que de
leur complexitÃ© et des propriÃ©tÃ©s attendues des semi-anneaux
sous-jacents utilisÃ©s pour les annotations de provenance. Nous
analysons Ã©galement les similaritÃ©s avec des classes de semi-
anneaux utilisÃ©s soit pour le calcul de provenance de requÃªtes
de lâ€™algÃ¨bre relationnelle [8] soit pour celui de programmes
Datalog [4].

â€” Accomplissant un ensemble complet dâ€™expÃ©riences sur des
donnÃ©es du monde rÃ©el dÃ©montrant le temps de calcul de la

provenance sur des graphes, avec une grande de variÃ©tÃ© de
semi-anneaux et de cas dâ€™utilisations. Nous observons Ã©ga-
lement que les paramÃ¨tres de topologie du graphe, comme
la largeur dâ€™arbre [10] semblent avoir un impact plus impor-
tant sur lâ€™efficacitÃ© des algorithmes que des paramÃ¨tres basÃ©s
sur la distance tels que la highway dimension [1]. Lâ€™implÃ©-
mentation de tous les algorithmes que nous utilisons pour
ces expÃ©riences est librement disponible sur https://bitbucket.
org/smaniu/graph-provenance/src/master/.
Pour plus de dÃ©tails sur ce travail, se rÃ©fÃ©rer Ã  [12].

REMERCIEMENTS

Ce travail a Ã©tÃ© financÃ© par le gouvernement franÃ§ais sous gestion
de lâ€™Agence Nationale de la Recherche comme partie du programme
Â« Investissements dâ€™avenir Â», rÃ©fÃ©rence ANR-19-P3IA-0001 (Institut
3IA PRAIRIE).

RÃ‰FÃ‰RENCES
[1] Ittai Abraham, Amos Fiat, Andrew V. Goldberg, and Renato Fonseca F. Werneck.
Highway dimension, shortest paths, and provably efficient algorithms. In SODA,
pages 782â€“793, Philadelphia, PA, USA, 2010. Society for Industrial and Applied
Mathematics.

[2] Marcelo Arenas and Jorge PÃ©rez. Querying semantic web data with sparql. In

PODS, pages 305â€“316, New York, 2011.

[3] Pablo BarcelÃ³. Querying graph databases. In PODS, pages 175â€“188, New York,

2013. ACM.

[4] Daniel Deutch, Tova Milo, Sudeepa Roy, and Val Tannen. Circuits for Datalog

Provenance. In ICDT, pages 201â€“212, 2014.

[5] Pedro Domingos and Matthew Richardson. Mining the network value of custo-

mers. In KDD, pages 57â€“66, New York, 2001. ACM.

[6] Nadime Francis, AndrÃ©s Taylor, Alastair Green, Paolo Guagliardo, Leonid Libkin,
Tobias Lindaaker, Victor Marsault, Stefan Plantikow, Mats Rydberg, and Petra
Selmer. Cypher : An evolving query language for property graphs. In SIGMOD,
pages 1433â€“1445, 2018.

[7] Todd J. Green, Grigoris Karvounarakis, and Val Tannen. Provenance semirings.

In PODS, pages 31â€“40, New York, 2007. ACM.

[8] Todd J. Green and Val Tannen. The semiring framework for database provenance.
In PODS, page 93â€“99, New York, NY, USA, 2017. Association for Computing
Machinery.

[9] ISO SC32 / WG3. Graph Query Language GQL. https://www.gqlstandards.org/.
[10] Silviu Maniu, Pierre Senellart, and Suraj Jog. An experimental study of the

treewidth of real-world graph data. In ICDT, Lisbon, Portugal, 2019.

[11] Yann Ramusat, Silviu Maniu, and Pierre Senellart. Semiring provenance over

graph databases. In TaPP, 2018.

[12] Yann Ramusat, Silviu Maniu, and Pierre Senellart. Provenance-based algorithms

for rich queries over graph databases, 2021. Ã€ paraÃ®tre.

[13] Ian Robinson, Jim Webber, and Emil Eifrem. Graph Databases. Oâ€™Reilly Media,

2013.

[14] Pierre Senellart. Provenance and probabilities in relational databases: From

theory to practice. SIGMOD Record, 46(4), 2017.

[15] Oskar van Rest, Sungpack Hong, Jinha Kim, Xuming Meng, and Hassan Chafi.
PGQL : A property graph query language. In GRADES, pages 7 :1â€“7 :6, New York,
NY, USA, 2016. ACM.

